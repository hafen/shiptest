language: java
cache: true

jdk:
  - openjdk7

before_install:
  - ls -la ~/
  - sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys B70731143DD9F856
  - export TESSERA_USER=shippable
  - curl -OL https://raw.githubusercontent.com/hafen/install-base/master/cdh5mr2precise/setup.sh
  - chmod 755 ./setup.sh
  - ./setup.sh
  - curl -OL https://raw.githubusercontent.com/hafen/install-base/master/cdh5mr2precise/hadoop.sh
  - chmod 755 ./hadoop.sh
  - ./hadoop.sh

script:
  - for x in `cd /etc/init.d ; ls hadoop-hdfs-*` ; do sudo service $x start ; done
  - sudo service hadoop-yarn-resourcemanager start
  - sudo service hadoop-yarn-nodemanager start
  - sudo service hadoop-mapreduce-historyserver start
  - ls -la ~/
  - cat /proc/meminfo
  - lsb_release -a
  - whoami
  - echo $TESSERA_USER
  - sudo whoami
  - mvn --version
  - pwd
  - hadoop fs -ls /user/shippable
  - hadoop fs -ls /
